{% extends 'hotel_manager/layout.html' %}


{%block content%}
	
<div id="content">
    <header class="clearfix">
        <h2 class="page-title pull-left">All Rooms</h2>
        <a href="/manager/add-rooms" class="pull-right btn-xs btn btn-primary">
        	Add Room
        	<span class="glyphicon glyphicon-plus"></span>
        </a>
    </header>
    <div class="content-inner">
        <table class="table table-striped table-bordered table-hover table-condensed ">
            <thead>
                <tr class="success">
                    <th>#</th>
                    <th>Room Number</th>
                    <th>Beds</th>
                    <th>Price</th>
                    <th>Status</th>
                    <th>Available on</th>
                    <th>Actions</th>
                </tr>
            </thead>

            <tbody>
                {% for room in rooms %}
                <tr>
                    <td>{{room.id}}</td>
                    <td>{{room.number }}</td>
                    <td>{{room.beds}}</td>
                    <td>{{room.price}}</td>
                    <td>
                    {% if room.reserved %}
                    <button class="btn btn-md btn-secondary" type="button" data-toggle="modal" data-target="#{{room.id}}list" >
                    	Reserved
                    	<span class="glyphicon glyphicon-folder-open"></span>
                    </button>	
                    <div id="{{room.id}}list" class="modal fade" role="dialog">
                      <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                          <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                          </div>
                          <div class="modal-body">
                                <table class="table table-striped table-bordered table-hover table-condensed">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>FullName</th>
                                            <th>Email</th>
                                            <th>phone</th>
                                            <th>Time</th>
                                            <th>Room No</th>
                                            <th>Days</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                     {% for booked in room.reservedroom %}
                                        <tr>
                                            <td>
                                                {{booked.id}}
                                            </td>
                                            <td>{{booked.fullname}}</td>
                                            <td><a href="mailto:{{booked.email}}">{{booked.email}}</a></td>
                                            <td>{{booked.phone}}</td>
                                            <td>{{booked.arrival}} </td>
                                            <td><span class="badge badge-primary">{{booked.room.number}}</span></td>
                                            <td>
                                                {{booked.days}}
                                            </td>
                                        </tr>
                                     {%endfor%}
                                    </tbody>
                                </table>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                          </div>
                        </div>

                      </div>
                     </div>
                    {%else%}
                    	Not Reserved
                    {%endif%}
                	</td>
                    <td>
                        {{room.available_at.strftime('%a %b %Y')}}
                    </td>
                    <td>
                        <a href="{{url_for('delete', id=room.id, db_urls='Room',name=room.number)}}" class="btn btn-xs btn-danger ">
                            <label class="hidden-xs"> Delete</label>
                            <span class="glyphicon glyphicon-remove"></span>
                        </a>
                    </td>
                </tr>
                {% endfor%}
            </tbody>
        </table>
    </div>
</div>
{% endblock%}